# 容器重启完成

**日期**: 2026-01-28  
**操作**: 重启前后端容器以应用代码修复

## 重启的容器

1. **后端容器** (`app`)
   - 服务名: `superinsight-app`
   - 状态: ✅ Up (healthy)
   - 端口: 8000

2. **前端容器** (`frontend`)
   - 服务名: `superinsight-frontend`
   - 状态: ✅ Up (healthy)
   - 端口: 5173

## 服务状态检查

### 后端 API
```bash
curl http://localhost:8000/health
```
**结果**: ✅ healthy

### 前端服务
```bash
curl http://localhost:5173/
```
**结果**: ✅ 200 OK

## 应用的修复

### 任务 API 修复
- ✅ 更新了 `src/api/tasks.py` 中的 `get_task_or_404()` 函数
- ✅ 更新了 `src/api/tasks.py` 中的 `list_tasks()` 函数
- ✅ 现在会先查询数据库，然后才回退到 mock 数据

### Label Studio 集成
- ✅ 前端实现完整（TaskDetail.tsx）
- ✅ 后端 API 端点完整
- ✅ 集成服务方法完整

## 下一步测试

### 1. 测试任务加载

访问任务列表页面：
```
http://localhost:5173/tasks
```

### 2. 测试任务详情

点击任何一个任务，应该能正常加载详情页面。

### 3. 测试 Label Studio 集成

在任务详情页面：
1. 点击"开始标注"按钮 - 应该导航到标注页面
2. 点击"在新窗口打开"按钮 - 应该在新窗口打开 Label Studio

## 注意事项

- 如果数据库中没有任务，系统会自动使用 mock 数据
- Mock 数据可以用于测试 Label Studio 集成功能
- 要创建真实任务，请使用任务创建功能

## 容器管理命令

### 查看容器状态
```bash
docker compose ps
```

### 查看容器日志
```bash
# 后端日志
docker compose logs app -f

# 前端日志
docker compose logs frontend -f
```

### 重启容器
```bash
# 重启后端
docker compose restart app

# 重启前端
docker compose restart frontend

# 重启所有容器
docker compose restart
```

## 问题排查

如果遇到问题：

1. **检查容器状态**
   ```bash
   docker compose ps
   ```

2. **查看容器日志**
   ```bash
   docker compose logs app --tail 50
   docker compose logs frontend --tail 50
   ```

3. **重新构建容器**（如果代码更改未生效）
   ```bash
   docker compose up -d --build app frontend
   ```

4. **完全重启**
   ```bash
   docker compose down
   docker compose up -d
   ```
