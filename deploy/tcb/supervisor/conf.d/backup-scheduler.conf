; Backup Scheduler Service Configuration
; Priority 600 - Starts after all services

[program:backup-scheduler]
command=/app/scripts/backup/backup-scheduler.sh
directory=/app
user=superinsight
autostart=%(ENV_ENABLE_BACKUP)s
autorestart=true
priority=600
startsecs=5
startretries=3
stopwaitsecs=30
stopsignal=TERM
redirect_stderr=true
stdout_logfile=/var/log/supervisor/backup-scheduler.log
stdout_logfile_maxbytes=5MB
stdout_logfile_backups=2

; Dependency on core services
depends_on=postgres,redis