; Storage Monitoring Service Configuration
; Priority 700 - Starts after all core services

[program:storage-monitor]
command=/app/scripts/storage/storage-monitor.sh
directory=/app
user=superinsight
autostart=%(ENV_ENABLE_METRICS)s
autorestart=true
priority=700
startsecs=10
startretries=3
stopwaitsecs=15
stopsignal=TERM
redirect_stderr=true
stdout_logfile=/var/log/supervisor/storage-monitor.log
stdout_logfile_maxbytes=5MB
stdout_logfile_backups=2

; Dependency on core services
depends_on=postgres,redis