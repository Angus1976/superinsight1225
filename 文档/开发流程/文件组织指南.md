# æ–‡ä»¶ç»„ç»‡æŒ‡å—

**æ—¥æœŸ**: 2026-01-28  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ“‹ å¿«é€Ÿå‚è€ƒ

### æ–‡ä»¶ç±»å‹ â†’ å­˜æ”¾ä½ç½®

| æ–‡ä»¶ç±»å‹ | å­˜æ”¾ä½ç½® | ç¤ºä¾‹ |
|---------|---------|------|
| åç«¯æºä»£ç  | `src/{module}/` | `src/api/auth.py` |
| å‰ç«¯æºä»£ç  | `frontend/src/{module}/` | `frontend/src/components/Button.tsx` |
| å•å…ƒæµ‹è¯• | `tests/unit/` | `tests/unit/test_auth.py` |
| é›†æˆæµ‹è¯• | `tests/integration/` | `tests/integration/test_api.py` |
| API æµ‹è¯• | `tests/api/` | `tests/api/test_login.py` |
| æ€§èƒ½æµ‹è¯• | `tests/performance/` | `tests/performance/test_api.py` |
| å±æ€§æµ‹è¯• | `tests/property/` | `tests/property/test_user.py` |
| é¡¹ç›®æ–‡æ¡£ | `æ–‡æ¡£/{åˆ†ç±»}/` | `æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/å¿«é€Ÿå¯åŠ¨.md` |
| è§„èŒƒæ–‡æ¡£ | `.kiro/steering/` | `.kiro/steering/rules.md` |
| åŠŸèƒ½è§„èŒƒ | `.kiro/specs/{feature}/` | `.kiro/specs/auth/requirements.md` |
| è‡ªåŠ¨åŒ–è„šæœ¬ | `scripts/{åˆ†ç±»}/` | `scripts/deployment/deploy.sh` |
| é…ç½®æ–‡ä»¶ | `config/` æˆ–æ ¹ç›®å½• | `config/app.yaml` |

---

## ğŸ¯ æŒ‰åœºæ™¯é€‰æ‹©ä½ç½®

### åœºæ™¯ 1: æ·»åŠ æ–°çš„ API ç«¯ç‚¹

**éœ€è¦åˆ›å»ºçš„æ–‡ä»¶**:

1. **API è·¯ç”±** â†’ `src/api/{module}.py`
   ```python
   # src/api/users.py
   from fastapi import APIRouter
   
   router = APIRouter(prefix="/api/users", tags=["users"])
   
   @router.get("/{user_id}")
   async def get_user(user_id: str):
       pass
   ```

2. **æ•°æ®æ¨¡å‹** â†’ `src/models/user.py`
   ```python
   # src/models/user.py
   from sqlalchemy import Column, String
   from src.database import Base
   
   class User(Base):
       __tablename__ = "users"
       id = Column(String, primary_key=True)
   ```

3. **è¯·æ±‚/å“åº”æ¨¡å‹** â†’ `src/schemas/user.py`
   ```python
   # src/schemas/user.py
   from pydantic import BaseModel
   
   class UserResponse(BaseModel):
       id: str
       name: str
   ```

4. **ä¸šåŠ¡é€»è¾‘** â†’ `src/services/user_service.py`
   ```python
   # src/services/user_service.py
   class UserService:
       async def get_user(self, user_id: str):
           pass
   ```

5. **å•å…ƒæµ‹è¯•** â†’ `tests/unit/test_user_service.py`
   ```python
   # tests/unit/test_user_service.py
   def test_get_user():
       pass
   ```

6. **API æµ‹è¯•** â†’ `tests/api/test_user_api.py`
   ```python
   # tests/api/test_user_api.py
   def test_get_user_endpoint():
       pass
   ```

7. **æ–‡æ¡£** â†’ `æ–‡æ¡£/åŠŸèƒ½å®ç°/ç”¨æˆ·ç®¡ç†.md`
   ```markdown
   # ç”¨æˆ·ç®¡ç† API
   
   ## è·å–ç”¨æˆ·
   
   GET /api/users/{user_id}
   ```

### åœºæ™¯ 2: æ·»åŠ æ–°çš„å‰ç«¯ç»„ä»¶

**éœ€è¦åˆ›å»ºçš„æ–‡ä»¶**:

1. **ç»„ä»¶** â†’ `frontend/src/components/UserCard.tsx`
   ```typescript
   // frontend/src/components/UserCard.tsx
   export const UserCard: React.FC<UserCardProps> = (props) => {
       return <div>{props.name}</div>;
   };
   ```

2. **Hook** â†’ `frontend/src/hooks/useUser.ts`
   ```typescript
   // frontend/src/hooks/useUser.ts
   export const useUser = (userId: string) => {
       // ...
   };
   ```

3. **API æœåŠ¡** â†’ `frontend/src/services/userApi.ts`
   ```typescript
   // frontend/src/services/userApi.ts
   export const getUserApi = (userId: string) => {
       return api.get(`/api/users/${userId}`);
   };
   ```

4. **ç±»å‹å®šä¹‰** â†’ `frontend/src/types/user.ts`
   ```typescript
   // frontend/src/types/user.ts
   export interface User {
       id: string;
       name: string;
   }
   ```

5. **æµ‹è¯•** â†’ `tests/unit/test_user_component.py` æˆ– `frontend/src/components/__tests__/UserCard.test.tsx`
   ```typescript
   // frontend/src/components/__tests__/UserCard.test.tsx
   describe('UserCard', () => {
       it('renders user name', () => {
           // ...
       });
   });
   ```

6. **æ–‡æ¡£** â†’ `æ–‡æ¡£/å‰ç«¯å¼€å‘/ç”¨æˆ·å¡ç‰‡ç»„ä»¶.md`

### åœºæ™¯ 3: æ·»åŠ æ–°çš„æµ‹è¯•è„šæœ¬

**éœ€è¦åˆ›å»ºçš„æ–‡ä»¶**:

1. **é›†æˆæµ‹è¯•** â†’ `tests/integration/test_feature_integration.py`
   ```python
   # tests/integration/test_feature_integration.py
   def test_feature_workflow():
       pass
   ```

2. **æµ‹è¯•è„šæœ¬** â†’ `scripts/testing/run-feature-tests.sh`
   ```bash
   #!/bin/bash
   # scripts/testing/run-feature-tests.sh
   pytest tests/integration/test_feature_integration.py -v
   ```

3. **æ–‡æ¡£** â†’ `æ–‡æ¡£/å¼€å‘æµç¨‹/æµ‹è¯•æŒ‡å—.md`

### åœºæ™¯ 4: æ·»åŠ æ–°çš„æ–‡æ¡£

**éœ€è¦åˆ›å»ºçš„æ–‡ä»¶**:

1. **åŠŸèƒ½æ–‡æ¡£** â†’ `æ–‡æ¡£/åŠŸèƒ½å®ç°/æ–°åŠŸèƒ½è¯´æ˜.md`
2. **éƒ¨ç½²æ–‡æ¡£** â†’ `æ–‡æ¡£/éƒ¨ç½²æŒ‡å—/æ–°éƒ¨ç½²æ–¹å¼.md`
3. **é—®é¢˜ä¿®å¤** â†’ `æ–‡æ¡£/é—®é¢˜ä¿®å¤/é—®é¢˜æè¿°.md`
4. **å¿«é€Ÿå¼€å§‹** â†’ `æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/å¿«é€ŸæŒ‡å—.md`

---

## ğŸ“ ç›®å½•ç»“æ„è¯¦è§£

### åç«¯æºä»£ç ç»“æ„

```
src/
â”œâ”€â”€ api/                    # API è·¯ç”±
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py            # è®¤è¯ API
â”‚   â”œâ”€â”€ users.py           # ç”¨æˆ· API
â”‚   â””â”€â”€ admin.py           # ç®¡ç† API
â”‚
â”œâ”€â”€ models/                # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ user.py
â”‚   â”œâ”€â”€ task.py
â”‚   â””â”€â”€ audit.py
â”‚
â”œâ”€â”€ schemas/               # Pydantic æ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ user.py
â”‚   â”œâ”€â”€ task.py
â”‚   â””â”€â”€ common.py
â”‚
â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ user_service.py
â”‚   â”œâ”€â”€ task_service.py
â”‚   â””â”€â”€ auth_service.py
â”‚
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ validators.py
â”‚   â”œâ”€â”€ formatters.py
â”‚   â””â”€â”€ helpers.py
â”‚
â”œâ”€â”€ config/                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py
â”‚
â”œâ”€â”€ database/              # æ•°æ®åº“
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ connection.py
â”‚   â””â”€â”€ models.py
â”‚
â”œâ”€â”€ security/              # å®‰å…¨è®¤è¯
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py
â”‚   â””â”€â”€ permissions.py
â”‚
â””â”€â”€ app.py                 # ä¸»åº”ç”¨
```

### å‰ç«¯æºä»£ç ç»“æ„

```
frontend/src/
â”œâ”€â”€ components/            # UI ç»„ä»¶
â”‚   â”œâ”€â”€ common/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â””â”€â”€ Form.tsx
â”‚   â”œâ”€â”€ user/             # ç”¨æˆ·ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ UserCard.tsx
â”‚   â”‚   â””â”€â”€ UserForm.tsx
â”‚   â””â”€â”€ __tests__/        # ç»„ä»¶æµ‹è¯•
â”‚
â”œâ”€â”€ pages/                 # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”œâ”€â”€ UserPage.tsx
â”‚   â””â”€â”€ AdminPage.tsx
â”‚
â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰ hooks
â”‚   â”œâ”€â”€ useUser.ts
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â””â”€â”€ useApi.ts
â”‚
â”œâ”€â”€ stores/                # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ userStore.ts
â”‚   â”œâ”€â”€ authStore.ts
â”‚   â””â”€â”€ appStore.ts
â”‚
â”œâ”€â”€ services/              # API æœåŠ¡
â”‚   â”œâ”€â”€ userApi.ts
â”‚   â”œâ”€â”€ authApi.ts
â”‚   â””â”€â”€ apiClient.ts
â”‚
â”œâ”€â”€ types/                 # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ user.ts
â”‚   â”œâ”€â”€ auth.ts
â”‚   â””â”€â”€ common.ts
â”‚
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ validators.ts
â”‚   â”œâ”€â”€ formatters.ts
â”‚   â””â”€â”€ helpers.ts
â”‚
â”œâ”€â”€ locales/               # å›½é™…åŒ–
â”‚   â”œâ”€â”€ zh/
â”‚   â”‚   â”œâ”€â”€ common.json
â”‚   â”‚   â””â”€â”€ user.json
â”‚   â””â”€â”€ en/
â”‚       â”œâ”€â”€ common.json
â”‚       â””â”€â”€ user.json
â”‚
â”œâ”€â”€ styles/                # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ globals.css
â”‚   â””â”€â”€ variables.css
â”‚
â””â”€â”€ App.tsx                # ä¸»åº”ç”¨
```

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ unit/                  # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_user_service.py
â”‚   â”œâ”€â”€ test_auth_utils.py
â”‚   â””â”€â”€ test_validators.py
â”‚
â”œâ”€â”€ integration/           # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_api_integration.py
â”‚   â”œâ”€â”€ test_label_studio_integration.py
â”‚   â”œâ”€â”€ docker-compose-integration-test.py
â”‚   â””â”€â”€ test_label_studio_sync.py
â”‚
â”œâ”€â”€ api/                   # API æµ‹è¯•
â”‚   â”œâ”€â”€ test_user_api.py
â”‚   â”œâ”€â”€ test_auth_api.py
â”‚   â””â”€â”€ test_login_api.py
â”‚
â”œâ”€â”€ performance/           # æ€§èƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_api_performance.py
â”‚   â””â”€â”€ test_database_performance.py
â”‚
â”œâ”€â”€ property/              # å±æ€§æµ‹è¯•
â”‚   â”œâ”€â”€ test_user_properties.py
â”‚   â””â”€â”€ test_billing_properties.py
â”‚
â””â”€â”€ security/              # å®‰å…¨æµ‹è¯•
    â”œâ”€â”€ test_auth_security.py
    â””â”€â”€ test_permission_security.py
```

### æ–‡æ¡£ç»“æ„

```
æ–‡æ¡£/
â”œâ”€â”€ å¿«é€Ÿå¼€å§‹/
â”‚   â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨æŒ‡å—.md
â”‚   â”œâ”€â”€ Dockerå¿«é€Ÿè®¾ç½®.md
â”‚   â””â”€â”€ å¿«é€Ÿå‚è€ƒæ‰‹å†Œ.md
â”‚
â”œâ”€â”€ éƒ¨ç½²æŒ‡å—/
â”‚   â”œâ”€â”€ éƒ¨ç½²è¯´æ˜.md
â”‚   â”œâ”€â”€ Dockeréƒ¨ç½².md
â”‚   â””â”€â”€ è…¾è®¯äº‘éƒ¨ç½²æŒ‡å—.md
â”‚
â”œâ”€â”€ Docker/
â”‚   â”œâ”€â”€ Dockeræ„å»ºæŒ‡å—.md
â”‚   â”œâ”€â”€ Dockeræ•…éšœæ’æŸ¥.md
â”‚   â””â”€â”€ å®¹å™¨é‡å¯çŠ¶æ€.md
â”‚
â”œâ”€â”€ åŠŸèƒ½å®ç°/
â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†.md
â”‚   â”œâ”€â”€ ä»»åŠ¡ç®¡ç†.md
â”‚   â””â”€â”€ å®¡è®¡ç³»ç»Ÿ.md
â”‚
â”œâ”€â”€ é—®é¢˜ä¿®å¤/
â”‚   â”œâ”€â”€ ç™»å½•é—®é¢˜ä¿®å¤.md
â”‚   â”œâ”€â”€ æ•°æ®åŒæ­¥é—®é¢˜.md
â”‚   â””â”€â”€ æ€§èƒ½ä¼˜åŒ–.md
â”‚
â”œâ”€â”€ çŠ¶æ€æŠ¥å‘Š/
â”‚   â”œâ”€â”€ ç³»ç»ŸçŠ¶æ€.md
â”‚   â”œâ”€â”€ éƒ¨ç½²çŠ¶æ€.md
â”‚   â””â”€â”€ å®Œæˆæ‘˜è¦.md
â”‚
â”œâ”€â”€ å›½é™…åŒ–ç¿»è¯‘/
â”‚   â”œâ”€â”€ ç¿»è¯‘è§„èŒƒ.md
â”‚   â”œâ”€â”€ ç¿»è¯‘å®ŒæˆæŠ¥å‘Š.md
â”‚   â””â”€â”€ ç¿»è¯‘éªŒè¯æŒ‡å—.md
â”‚
â”œâ”€â”€ å¼€å‘æµç¨‹/
â”‚   â”œâ”€â”€ å¼€å‘è§„èŒƒ.md
â”‚   â”œâ”€â”€ æµ‹è¯•æŒ‡å—.md
â”‚   â”œâ”€â”€ æ–‡ä»¶ç»„ç»‡æŒ‡å—.md
â”‚   â””â”€â”€ ä»£ç å®¡æŸ¥æ¸…å•.md
â”‚
â””â”€â”€ ç´¢å¼•å’Œè¯´æ˜/
    â”œâ”€â”€ æ–‡æ¡£æ€»ç´¢å¼•.md
    â”œâ”€â”€ æ–‡æ¡£æ•´ç†å®ŒæˆæŠ¥å‘Š.md
    â””â”€â”€ æ•´ç†éªŒè¯æŠ¥å‘Š.md
```

### è„šæœ¬ç»“æ„

```
scripts/
â”œâ”€â”€ deployment/            # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy-to-tcb.sh
â”‚   â”œâ”€â”€ deploy-to-docker.sh
â”‚   â””â”€â”€ deploy-local.sh
â”‚
â”œâ”€â”€ testing/               # æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ run-all-tests.sh
â”‚   â”œâ”€â”€ run-unit-tests.sh
â”‚   â””â”€â”€ run-integration-tests.sh
â”‚
â”œâ”€â”€ maintenance/           # ç»´æŠ¤è„šæœ¬
â”‚   â”œâ”€â”€ backup-database.sh
â”‚   â”œâ”€â”€ cleanup-logs.sh
â”‚   â””â”€â”€ health-check.sh
â”‚
â”œâ”€â”€ utilities/             # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ setup-env.sh
â”‚   â”œâ”€â”€ install-deps.sh
â”‚   â””â”€â”€ reset-db.sh
â”‚
â””â”€â”€ docker/                # Docker è„šæœ¬
    â”œâ”€â”€ build-images.sh
    â”œâ”€â”€ start-services.sh
    â””â”€â”€ stop-services.sh
```

---

## âœ… æ£€æŸ¥æ¸…å•

### åˆ›å»ºæ–°æ–‡ä»¶å‰

- [ ] ç¡®å®šæ–‡ä»¶ç±»å‹ (æºä»£ç /æµ‹è¯•/æ–‡æ¡£/è„šæœ¬)
- [ ] é€‰æ‹©åˆé€‚çš„ç›®å½•
- [ ] æ£€æŸ¥æ˜¯å¦å·²æœ‰ç±»ä¼¼æ–‡ä»¶
- [ ] éµå¾ªå‘½åè§„èŒƒ
- [ ] ä¸åœ¨æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶

### åˆ›å»ºæ–°æ–‡ä»¶æ—¶

- [ ] ä½¿ç”¨æ­£ç¡®çš„æ–‡ä»¶æ‰©å±•å
- [ ] æ·»åŠ æ–‡ä»¶å¤´æ³¨é‡Š (å¦‚éœ€è¦)
- [ ] éµå¾ªä»£ç é£æ ¼è§„èŒƒ
- [ ] æ·»åŠ ç›¸å…³æµ‹è¯•
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

### æäº¤ä»£ç å‰

- [ ] æ‰€æœ‰æ–‡ä»¶åœ¨æ­£ç¡®ä½ç½®
- [ ] å‘½åç¬¦åˆè§„èŒƒ
- [ ] å¯¼å…¥è·¯å¾„æ­£ç¡®
- [ ] æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°

---

## ğŸ” å¸¸è§é”™è¯¯

### âŒ é”™è¯¯ 1: åœ¨æ ¹ç›®å½•åˆ›å»ºæºä»£ç æ–‡ä»¶

```
âŒ auth.py (æ ¹ç›®å½•)
âœ… src/security/auth.py
```

### âŒ é”™è¯¯ 2: åœ¨æ ¹ç›®å½•åˆ›å»ºæµ‹è¯•æ–‡ä»¶

```
âŒ test_auth.py (æ ¹ç›®å½•)
âœ… tests/unit/test_auth.py
```

### âŒ é”™è¯¯ 3: åœ¨æ ¹ç›®å½•åˆ›å»ºæ–‡æ¡£

```
âŒ USER_GUIDE.md (æ ¹ç›®å½•)
âœ… æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/ç”¨æˆ·æŒ‡å—.md
```

### âŒ é”™è¯¯ 4: åœ¨æ ¹ç›®å½•åˆ›å»ºè„šæœ¬

```
âŒ deploy.sh (æ ¹ç›®å½•)
âœ… scripts/deployment/deploy.sh
```

### âŒ é”™è¯¯ 5: ä¸ä¸€è‡´çš„å‘½å

```
âŒ UserService.py (PascalCase)
âœ… user_service.py (snake_case)

âŒ test-auth.py (kebab-case)
âœ… test_auth.py (snake_case)
```

---

## ğŸ“ è·å–å¸®åŠ©

### ä¸ç¡®å®šæ–‡ä»¶åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ

1. æŸ¥çœ‹æœ¬æŒ‡å—çš„"å¿«é€Ÿå‚è€ƒ"è¡¨
2. æŸ¥çœ‹ç±»ä¼¼æ–‡ä»¶çš„ä½ç½®
3. æŸ¥çœ‹é¡¹ç›®ç»“æ„è§„èŒƒ
4. è¯¢é—®å›¢é˜Ÿæˆå‘˜

### éœ€è¦åˆ›å»ºæ–°çš„ç›®å½•ï¼Ÿ

1. ç¡®è®¤æ–°ç›®å½•ç¬¦åˆé¡¹ç›®ç»“æ„
2. åœ¨ç›¸åº”çš„çˆ¶ç›®å½•ä¸‹åˆ›å»º
3. æ·»åŠ  `__init__.py` (Python æ¨¡å—)
4. æ›´æ–°æœ¬æŒ‡å—

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ–‡ä»¶ç»„ç»‡è§„èŒƒ](../../.kiro/steering/file-organization-rules.md)
- [é¡¹ç›®ç»“æ„è§„èŒƒ](../../.kiro/steering/structure.md)
- [å¼€å‘æµç¨‹è§„èŒƒ](../../.kiro/steering/doc-first-workflow.md)
- [ä»£ç è§„èŒƒ](../../.kiro/steering/typescript-export-rules.md)

---

**æœ€åæ›´æ–°**: 2026-01-28  
**ç»´æŠ¤è€…**: SuperInsight å¼€å‘å›¢é˜Ÿ
