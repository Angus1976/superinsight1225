; Metrics Collection Service Configuration
; Priority 500 - Starts after all core services

[program:metrics-collector]
command=/app/scripts/monitoring/metrics-collector.sh
directory=/app
user=superinsight
autostart=%(ENV_ENABLE_METRICS)s
autorestart=true
priority=500
startsecs=5
startretries=3
stopwaitsecs=10
stopsignal=TERM
redirect_stderr=true
stdout_logfile=/var/log/supervisor/metrics-collector.log
stdout_logfile_maxbytes=5MB
stdout_logfile_backups=2

; Run every 30 seconds
numprocs=1
process_name=%(program_name)s