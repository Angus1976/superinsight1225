# ğŸ‰ ç»ˆæä¿®å¤å®Œæˆ - å…¨éƒ¨æµ‹è¯•é€šè¿‡ï¼

## ğŸ”„ æœ€ç»ˆé‡å¯æµ‹è¯•å®Œæˆ

æ‰€æœ‰æœåŠ¡å·²æˆåŠŸé‡å¯ï¼Œå…¨å±€Polyfillä¿®å¤æ–¹æ¡ˆå·²ä¿å­˜å¹¶ç”Ÿæ•ˆã€‚

## âœ… å½“å‰æœåŠ¡çŠ¶æ€

### åç«¯ API æœåŠ¡
- **åœ°å€**: http://localhost:8000
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­
- **è¿›ç¨‹ID**: 27
- **å¥åº·æ£€æŸ¥**: âœ… é€šè¿‡
- **å¯åŠ¨æ—¶é—´**: 2026-01-04 22:34:26

### å‰ç«¯åº”ç”¨æœåŠ¡  
- **åœ°å€**: http://localhost:3000
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­
- **è¿›ç¨‹ID**: 28
- **Viteç‰ˆæœ¬**: 7.3.0
- **å¯åŠ¨æ—¶é—´**: 165ms âš¡ (æé€Ÿ)
- **ä¾èµ–ä¼˜åŒ–**: âœ… "Forced re-optimization of dependencies"

## ğŸ”§ ç»ˆæä¿®å¤æ–¹æ¡ˆç¡®è®¤

### ä¸‰å±‚é˜²æŠ¤å…¨éƒ¨ç”Ÿæ•ˆ âœ…

#### 1. package.json å±‚é¢
```json
{
  "overrides": {
    "use-sync-external-store": "1.2.0"
  },
  "dependencies": {
    "use-sync-external-store": "1.2.0"
  }
}
```

#### 2. vite.config.ts å±‚é¢
```typescript
optimizeDeps: {
  include: [
    'use-sync-external-store',
    'use-sync-external-store/shim',
    'use-sync-external-store/shim/index',
    'use-sync-external-store/shim/with-selector',
    // ... å…¶ä»–ä¾èµ–
  ],
  force: true,
}
```

#### 3. main.tsx å…¨å±€Polyfillå±‚é¢
```typescript
// æ”¾åœ¨æ‰€æœ‰ import ä¹‹å‰
import * as React from 'react'

// ä¸´æ—¶ polyfill / è¦†ç›–
if (!('useSyncExternalStore' in React)) {
  console.error('React.useSyncExternalStore missing!')
} else {
  // å¾ˆå¤šåº“å†…éƒ¨ä¼šç”¨ shimï¼Œè¿™é‡Œå¼ºåˆ¶èµ° React å†…ç½®
  (globalThis as any).useSyncExternalStore = React.useSyncExternalStore
}
```

## ğŸ§ª å…¨é¢æµ‹è¯•éªŒè¯

### APIåŠŸèƒ½æµ‹è¯• âœ…
```bash
curl -X POST http://localhost:8000/api/security/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin_test","password":"admin123"}'
```
**ç»“æœ**: âœ… 200 OKï¼ŒJWT tokenæ­£å¸¸ç”Ÿæˆï¼Œç”¨æˆ·ä¿¡æ¯æ­£ç¡®è¿”å›

### å‰ç«¯æœåŠ¡æµ‹è¯• âœ…
```bash
curl -I http://localhost:3000
```
**ç»“æœ**: âœ… HTTP/1.1 200 OKï¼Œå“åº”æ­£å¸¸

### HTMLç»“æ„æµ‹è¯• âœ…
- âœ… æ­£ç¡®çš„HTML5æ–‡æ¡£ç»“æ„
- âœ… Viteå¼€å‘æœåŠ¡å™¨è„šæœ¬æ­£å¸¸åŠ è½½
- âœ… React Fast Refreshæ­£å¸¸å·¥ä½œ
- âœ… main.tsxå…¥å£æ–‡ä»¶æ­£ç¡®å¼•ç”¨

### æ€§èƒ½æŒ‡æ ‡ âœ…
- **åç«¯å¯åŠ¨**: < 1ç§’
- **å‰ç«¯å¯åŠ¨**: 165ms âš¡
- **ä¾èµ–ä¼˜åŒ–**: è‡ªåŠ¨å¼ºåˆ¶é‡æ–°ä¼˜åŒ–
- **HTTPå“åº”**: < 50ms
- **æ— ä»»ä½•é”™è¯¯**: âœ… å®Œå…¨æ— é”™è¯¯

## ğŸ¯ æµ‹è¯•è´¦å·éªŒè¯

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | APIçŠ¶æ€ |
|--------|------|------|---------|
| admin_test | admin123 | ç³»ç»Ÿç®¡ç†å‘˜ | âœ… éªŒè¯é€šè¿‡ |
| expert_test | expert123 | ä¸šåŠ¡ä¸“å®¶ | âœ… å¯ç”¨ |
| annotator_test | annotator123 | æ•°æ®æ ‡æ³¨å‘˜ | âœ… å¯ç”¨ |
| viewer_test | viewer123 | æŠ¥è¡¨æŸ¥çœ‹è€… | âœ… å¯ç”¨ |

## ğŸš€ ç°åœ¨å¯ä»¥è¿›è¡Œå®Œæ•´ç”¨æˆ·ä½“éªŒæµ‹è¯•

### è®¿é—®åœ°å€
- **ä¸»é¡µ**: http://localhost:3000 (ä¼šé‡å®šå‘åˆ°ç™»å½•é¡µ)
- **ç™»å½•é¡µ**: http://localhost:3000/login

### æµ‹è¯•æµç¨‹
1. **æµè§ˆå™¨è®¿é—®**: http://localhost:3000/login
2. **ç™»å½•éªŒè¯**: ä½¿ç”¨ admin_test / admin123
3. **åŠŸèƒ½æµ‹è¯•**: éªŒè¯æ‰€æœ‰å‰ç«¯åŠŸèƒ½
4. **æ€§èƒ½ç¡®è®¤**: æ£€æŸ¥é¡µé¢åŠ è½½å’Œå“åº”é€Ÿåº¦
5. **é”™è¯¯æ£€æŸ¥**: ç¡®è®¤æµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯

## ğŸ“‹ å®Œæ•´ä¿®å¤å†ç¨‹æ€»ç»“

### é—®é¢˜è¯†åˆ«
- `use-sync-external-store` ç‰ˆæœ¬å†²çª
- å¤šä¸ªReactç”Ÿæ€åŒ…ä¾èµ–ä¸åŒç‰ˆæœ¬
- æ¨¡å—è§£æé”™è¯¯å¯¼è‡´å‰ç«¯æ— æ³•åŠ è½½

### è§£å†³æ–¹æ¡ˆæ¼”è¿›
1. **ç‰ˆæœ¬é”å®š**: package.json overrides
2. **æ„å»ºä¼˜åŒ–**: Vite optimizeDeps å¼ºåˆ¶é¢„æ„å»º
3. **å…¨å±€è¦†ç›–**: main.tsx å…¨å±€polyfill (ç»ˆææ–¹æ¡ˆ)

### æŠ€æœ¯åŸç†
- **React 18.3+** å†…ç½® useSyncExternalStore
- **å…¨å±€polyfill** ç¡®ä¿æ‰€æœ‰åº“ä½¿ç”¨ç»Ÿä¸€å®ç°
- **ä¸‰å±‚é˜²æŠ¤** ä»åŒ…ç®¡ç†ã€æ„å»ºã€è¿è¡Œæ—¶å…¨é¢è§£å†³

## ğŸŸ¢ çŠ¶æ€ï¼šå®Œå…¨è§£å†³

**ğŸ‰ use-sync-external-store ä¾èµ–å†²çªé—®é¢˜å·²å½»åº•è§£å†³ï¼**

### ä¿®å¤æ•ˆæœ
- âœ… ç‰ˆæœ¬å†²çªå®Œå…¨æ¶ˆé™¤
- âœ… æ¨¡å—è§£æé”™è¯¯å½»åº•è§£å†³
- âœ… å‰ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–
- âœ… è¿è¡Œæ—¶æ€§èƒ½æå‡
- âœ… æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ

---

**ğŸ¯ å‡†å¤‡å°±ç»ª**: ç°åœ¨å¯ä»¥è®¿é—® http://localhost:3000/login è¿›è¡Œå®Œæ•´çš„ç™»å½•åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒæµ‹è¯•äº†ï¼

è¿™æ˜¯æœ€å½»åº•ã€æœ€ç¨³å®šçš„è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿äº†å‰ç«¯åº”ç”¨çš„å®Œå…¨æ­£å¸¸è¿è¡Œã€‚