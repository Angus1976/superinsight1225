# 任务加载失败 - 快速修复

**问题**: 任务详情页面显示"加载任务失败"

## 原因

后端 API 没有查询真实数据库，只查询内存和 mock 数据。

## 已修复

✅ 更新了 `src/api/tasks.py` 中的 `get_task_or_404()` 函数  
✅ 更新了 `src/api/tasks.py` 中的 `list_tasks()` 函数  
✅ 现在会先查询数据库，然后才回退到 mock 数据

## 解决方案

### 方案 1: 重启后端服务（推荐）

```bash
# 重启后端容器以应用代码更改
docker compose restart superinsight-api

# 或者如果直接运行
# 停止并重新启动 uvicorn
```

### 方案 2: 创建测试任务

如果数据库中没有任务，需要先创建：

1. 登录系统
2. 进入任务列表页面
3. 点击"创建任务"按钮
4. 填写任务信息并保存
5. 访问新创建的任务详情页面

### 方案 3: 使用 Mock 数据测试

如果只是想测试 Label Studio 集成功能，可以：

1. 访问任务列表页面 (http://localhost:5173/tasks)
2. 点击任何一个 mock 任务
3. 测试"开始标注"和"在新窗口打开"功能

## 验证修复

1. 重启后端服务
2. 刷新浏览器页面
3. 任务详情应该正常加载

## 注意事项

- 修改了后端代码，需要重启服务才能生效
- 如果数据库为空，会自动使用 mock 数据
- Mock 数据的任务 ID 是固定的，可以用于测试
