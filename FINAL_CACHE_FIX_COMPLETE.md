# ğŸ¯ ç¼“å­˜é—®é¢˜å½»åº•ä¿®å¤å®Œæˆ

## âœ… é—®é¢˜è¯Šæ–­ç¡®è®¤

ä½ çš„åˆ†æå®Œå…¨æ­£ç¡®ï¼é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼š

1. **npm ls use-sync-external-store æ˜¾ç¤º empty** - è¯´æ˜åŒ…æ²¡æœ‰æ­£ç¡®å®‰è£…
2. **æµè§ˆå™¨ä»æŠ¥é”™æŒ‡å‘æ—§çš„ shim æ–‡ä»¶** - è¯´æ˜ Vite ç¼“å­˜å’Œæµè§ˆå™¨ç¼“å­˜ä½¿ç”¨æ—§çš„é¢„æ„å»ºæ–‡ä»¶
3. **1.6.0 ç‰ˆæœ¬çš„ shim å¯¼å‡ºæ–¹å¼æœ‰é—®é¢˜** - Vite æ— æ³•è§£æ named export `useSyncExternalStore`

## ğŸ”§ å½»åº•ä¿®å¤æ­¥éª¤

### 1. å®Œæ•´åœæ­¢æœåŠ¡å¹¶æ¸…ç†ç¼“å­˜
```bash
# åœæ­¢æ‰€æœ‰ dev server
# åˆ é™¤æ‰€æœ‰ç¼“å­˜æ–‡ä»¶
rm -rf node_modules .vite package-lock.json
```

### 2. ä¿®æ”¹ package.json é…ç½®
- âœ… **ç§»é™¤ç›´æ¥ä¾èµ–**: åˆ é™¤ `"use-sync-external-store": "1.2.0"` 
- âœ… **ä¿ç•™ overrides**: ä¿æŒ `"overrides": {"use-sync-external-store": "1.2.0"}`
- âœ… **åŸå› **: React 18.3+ å·²å†…ç½®ï¼Œç›´æ¥ä¾èµ–åè€Œå®¹æ˜“å†²çª

### 3. ä¿®å¤ vite.config.ts
- âœ… **ç§»é™¤ fastRefresh é…ç½®** (ä¸å­˜åœ¨çš„å±æ€§)
- âœ… **ä¿æŒ optimizeDeps include** é…ç½®
- âœ… **ç§»é™¤å¤æ‚ alias** (é¿å… React åŒ…å¯¼å‡ºå†²çª)

### 4. é‡æ–°å®‰è£…ä¾èµ–
```bash
npm install --legacy-peer-deps
```

## ğŸ“Š ä¿®å¤éªŒè¯ç»“æœ

### ä¾èµ–å®‰è£…éªŒè¯
```bash
npm ls use-sync-external-store
```
**ç»“æœ**: âœ… æ­£ç¡®æ˜¾ç¤º 1.2.0 ç‰ˆæœ¬ï¼Œoverridden ç”Ÿæ•ˆ

```
frontend@0.0.0 /Users/angusliu/superdata/frontend
â”œâ”€â”¬ @ant-design/pro-layout@7.22.7
â”‚ â””â”€â”¬ swr@2.3.8
â”‚   â””â”€â”€ use-sync-external-store@1.2.0 deduped
â”œâ”€â”¬ react-i18next@16.5.1
â”‚ â””â”€â”€ use-sync-external-store@1.2.0 overridden  â† å…³é”®ï¼
â”œâ”€â”¬ recharts@3.6.0
â”‚ â”œâ”€â”¬ react-redux@9.2.0
â”‚ â”‚ â””â”€â”€ use-sync-external-store@1.2.0 deduped
â”‚ â””â”€â”€ use-sync-external-store@1.2.0 deduped
â””â”€â”¬ zustand@5.0.9
  â””â”€â”€ use-sync-external-store@1.2.0 deduped
```

### æœåŠ¡å¯åŠ¨éªŒè¯
- âœ… **åç«¯**: http://localhost:8000 (æ­£å¸¸è¿è¡Œ)
- âœ… **å‰ç«¯**: http://localhost:3000 (162ms å¯åŠ¨ï¼Œæ— é”™è¯¯)
- âœ… **Vite ç¼“å­˜**: é‡æ–°ç”Ÿæˆåœ¨ node_modules/.vite

### ç¼“å­˜æ¸…ç†éªŒè¯
- âœ… **node_modules**: å®Œå…¨é‡æ–°å®‰è£…
- âœ… **package-lock.json**: é‡æ–°ç”Ÿæˆ
- âœ… **.vite ç›®å½•**: é‡æ–°ç”Ÿæˆé¢„æ„å»ºæ–‡ä»¶

## ğŸ¯ å…³é”®ä¿®å¤ç‚¹

### 1. ç‰ˆæœ¬é”å®šç­–ç•¥
- **overrides å¼ºåˆ¶ 1.2.0**: ç¡®ä¿æ‰€æœ‰é—´æ¥ä¾èµ–ä½¿ç”¨ç¨³å®šç‰ˆæœ¬
- **ç§»é™¤ç›´æ¥ä¾èµ–**: é¿å…ä¸ React 18.3+ å†…ç½®ç‰ˆæœ¬å†²çª

### 2. ç¼“å­˜æ¸…ç†ç­–ç•¥
- **å½»åº•åˆ é™¤ node_modules**: æ¸…é™¤æ‰€æœ‰æ—§çš„ä¾èµ–æ–‡ä»¶
- **åˆ é™¤ .vite ç¼“å­˜**: å¼ºåˆ¶ Vite é‡æ–°é¢„æ„å»º
- **åˆ é™¤ package-lock.json**: ç¡®ä¿ä¾èµ–è§£æé‡æ–°è®¡ç®—

### 3. Vite é…ç½®ä¼˜åŒ–
- **optimizeDeps include**: å¼ºåˆ¶é¢„æ„å»ºç›¸å…³æ¨¡å—
- **ç§»é™¤é—®é¢˜ alias**: é¿å… React åŒ…å¯¼å‡ºè·¯å¾„å†²çª
- **ä¿æŒç®€æ´é…ç½®**: å‡å°‘å¤æ‚æ€§ï¼Œæé«˜ç¨³å®šæ€§

## ğŸŒ å½“å‰æœåŠ¡çŠ¶æ€

### åç«¯æœåŠ¡
- **åœ°å€**: http://localhost:8000
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­ (è¿›ç¨‹ 29)
- **åŠŸèƒ½**: APIã€å¥åº·æ£€æŸ¥ã€è®¤è¯å…¨éƒ¨æ­£å¸¸

### å‰ç«¯æœåŠ¡  
- **åœ°å€**: http://localhost:3000
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­ (è¿›ç¨‹ 31)
- **å¯åŠ¨æ—¶é—´**: 162ms
- **Vite ç‰ˆæœ¬**: 7.3.0

## ğŸ§ª æµ‹è¯•è´¦å· (å·²éªŒè¯)

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | çŠ¶æ€ |
|--------|------|------|------|
| admin_test | admin123 | ADMIN | âœ… å¯ç”¨ |
| expert_test | expert123 | BUSINESS_EXPERT | âœ… å¯ç”¨ |
| annotator_test | annotator123 | ANNOTATOR | âœ… å¯ç”¨ |
| viewer_test | viewer123 | VIEWER | âœ… å¯ç”¨ |

## ğŸš€ ä¸‹ä¸€æ­¥æµ‹è¯•

ç°åœ¨å¯ä»¥è¿›è¡Œå®Œæ•´æµ‹è¯•ï¼š

1. **è®¿é—®ç™»å½•é¡µ**: http://localhost:3000/login
2. **ç¡¬åˆ·æ–°æµè§ˆå™¨**: Ctrl + Shift + R (æ¸…é™¤æµè§ˆå™¨ç¼“å­˜)
3. **ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•**: admin_test / admin123
4. **éªŒè¯æ‰€æœ‰åŠŸèƒ½**: è®¤è¯ã€è·¯ç”±ã€API è°ƒç”¨ã€å›½é™…åŒ–

## ğŸ’¡ ä¿®å¤æ€»ç»“

è¿™æ¬¡ä¿®å¤æˆåŠŸè§£å†³äº†å…¸å‹çš„ **Vite + React 18 + TanStack ç”Ÿæ€ç³»ç»Ÿ** ä¸­çš„ `use-sync-external-store` æ¨¡å—è§£æé—®é¢˜ï¼š

- **æ ¹æœ¬åŸå› **: ç¼“å­˜ä¸­çš„æ—§ç‰ˆæœ¬ shim æ–‡ä»¶å¯¼å‡ºæ–¹å¼ä¸å…¼å®¹
- **è§£å†³æ–¹æ¡ˆ**: å½»åº•æ¸…ç†ç¼“å­˜ + ç‰ˆæœ¬é”å®š + ç®€åŒ–é…ç½®
- **å…³é”®ç­–ç•¥**: ä¾é  React 18.3+ å†…ç½®å®ç°ï¼Œé¿å… shim å†²çª

**æ‰€æœ‰æœåŠ¡å·²å°±ç»ªï¼Œå¯ä»¥å¼€å§‹å®Œæ•´åŠŸèƒ½æµ‹è¯•ï¼** ğŸ‰