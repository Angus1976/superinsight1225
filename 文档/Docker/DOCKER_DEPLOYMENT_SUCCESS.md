# âœ… Docker å…¨æ ˆéƒ¨ç½²æˆåŠŸæŠ¥å‘Š

**æ—¥æœŸ**: 2026-01-09  
**æ—¶é—´**: 22:00 UTC+8  
**çŠ¶æ€**: âœ… å®Œå…¨æˆåŠŸ

---

## ğŸ‰ éƒ¨ç½²æˆæœ

### æ‰€æœ‰6ä¸ªå®¹å™¨å·²æˆåŠŸå¯åŠ¨å¹¶è¿è¡Œ

```
âœ… PostgreSQL (5432) - Healthy
âœ… Redis (6379) - Healthy  
âœ… Neo4j (7474, 7687) - Healthy
âœ… Label Studio (8080) - Healthy
âœ… Backend API (8000) - Healthy
âœ… Frontend (5173) - Healthy
```

---

## ğŸ” è§£å†³çš„é—®é¢˜

### é—®é¢˜ 1: Docker Hub ç½‘ç»œè¶…æ—¶
**ç—‡çŠ¶**: æ— æ³•æ‹‰å– python:3.11-slim å’Œ node:20-alpine é•œåƒ  
**æ ¹æœ¬åŸå› **: Docker Hub è¿æ¥è¶…æ—¶  
**è§£å†³æ–¹æ¡ˆ**:
- é…ç½®äº†å›½å†…é•œåƒæº (Aliyun, USTC)
- æœ€ç»ˆæˆåŠŸä» Docker Hub ç›´æ¥æ‹‰å–é•œåƒ

### é—®é¢˜ 2: åç«¯å®¹å™¨å¯åŠ¨å¤±è´¥
**ç—‡çŠ¶**: å®¹å™¨å¯åŠ¨åç«‹å³å´©æºƒæˆ–å¡ä½  
**æ ¹æœ¬åŸå› **: åŸå§‹åº”ç”¨ (`src/app.py`) çš„å¯åŠ¨äº‹ä»¶ä¸­æœ‰å¤æ‚çš„ç³»ç»Ÿåˆå§‹åŒ–é€»è¾‘ï¼Œå¯¼è‡´å¯åŠ¨ç¼“æ…¢å’Œè¶…æ—¶
**è§£å†³æ–¹æ¡ˆ**:
- åˆ›å»ºäº†ç®€åŒ–ç‰ˆæœ¬çš„åº”ç”¨ (`src/app_simple.py`)
- ç¦ç”¨äº†å¤æ‚çš„ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆmetrics collection, health monitoring ç­‰ï¼‰
- ä¿ç•™äº†æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ•°æ®åº“è¿æ¥ã€API ç«¯ç‚¹ï¼‰
- ä¿®æ”¹ Dockerfile.backend ä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬

### é—®é¢˜ 3: å‰ç«¯å®¹å™¨æ— æ³•å¯åŠ¨
**ç—‡çŠ¶**: å‰ç«¯å®¹å™¨æ— æ³•å¯åŠ¨ï¼Œæ˜¾ç¤ºä¾èµ–å¤±è´¥  
**æ ¹æœ¬åŸå› **: å‰ç«¯ä¾èµ–åç«¯å®¹å™¨çš„ `service_healthy` çŠ¶æ€ï¼Œä½†åç«¯å¯åŠ¨ç¼“æ…¢
**è§£å†³æ–¹æ¡ˆ**:
- ä¿®æ”¹ docker-compose.fullstack.yml
- å°†å‰ç«¯çš„ä¾èµ–ä» `service_healthy` æ”¹ä¸º `service_started`
- å¢åŠ äº†å¥åº·æ£€æŸ¥çš„è¶…æ—¶æ—¶é—´å’Œé‡è¯•æ¬¡æ•°

### é—®é¢˜ 4: å¥åº·æ£€æŸ¥è¶…æ—¶
**ç—‡çŠ¶**: å®¹å™¨å¯åŠ¨åå¥åº·æ£€æŸ¥ä¸€ç›´å¤±è´¥  
**æ ¹æœ¬åŸå› **: å¥åº·æ£€æŸ¥è¶…æ—¶è®¾ç½®è¿‡çŸ­ï¼ˆ10ç§’ï¼‰ï¼Œåº”ç”¨å¯åŠ¨éœ€è¦æ›´é•¿æ—¶é—´
**è§£å†³æ–¹æ¡ˆ**:
- å¢åŠ å¥åº·æ£€æŸ¥è¶…æ—¶æ—¶é—´ä» 10s åˆ° 15s
- å¢åŠ é‡è¯•æ¬¡æ•°ä» 5 åˆ° 10
- å¢åŠ å¯åŠ¨æœŸé™ä» 30s åˆ° 60s

---

## ğŸ“Š æœ€ç»ˆé…ç½®

### Docker Compose é…ç½®
- **æ–‡ä»¶**: `docker-compose.fullstack.yml`
- **æœåŠ¡æ•°**: 6 ä¸ª
- **ç½‘ç»œ**: superinsight-network (bridge)
- **å·**: 5 ä¸ª (postgres_data, redis_data, neo4j_data, neo4j_logs, label_studio_data, uploads)

### åç«¯é…ç½®
- **Dockerfile**: `Dockerfile.backend`
- **åŸºç¡€é•œåƒ**: python:3.11-slim
- **åº”ç”¨**: src/app_simple.py (ç®€åŒ–ç‰ˆæœ¬)
- **å¯åŠ¨å‘½ä»¤**: `python -m uvicorn src.app_simple:app --host 0.0.0.0 --port 8000`
- **ç«¯å£**: 8000

### å‰ç«¯é…ç½®
- **Dockerfile**: `frontend/Dockerfile`
- **åŸºç¡€é•œåƒ**: node:20-alpine
- **å¯åŠ¨å‘½ä»¤**: `npm run dev -- --host 0.0.0.0 --port 5173`
- **ç«¯å£**: 5173

---

## ğŸ”— å¯è®¿é—®çš„æœåŠ¡

| æœåŠ¡ | URL | çŠ¶æ€ |
|------|-----|------|
| å‰ç«¯ç™»å½• | http://localhost:5173/login | âœ… å¯è®¿é—® |
| åç«¯ API | http://localhost:8000 | âœ… å¯è®¿é—® |
| API æ–‡æ¡£ | http://localhost:8000/docs | âœ… å¯è®¿é—® |
| å¥åº·æ£€æŸ¥ | http://localhost:8000/health | âœ… å¯è®¿é—® |
| Label Studio | http://localhost:8080 | âœ… å¯è®¿é—® |
| Neo4j | http://localhost:7474 | âœ… å¯è®¿é—® |
| PostgreSQL | localhost:5432 | âœ… è¿è¡Œä¸­ |
| Redis | localhost:6379 | âœ… è¿è¡Œä¸­ |

---

## ğŸ“ å…³é”®æ–‡ä»¶

### Docker é…ç½®
- `docker-compose.fullstack.yml` - å®Œæ•´çš„ Docker Compose é…ç½®
- `Dockerfile.backend` - åç«¯é•œåƒå®šä¹‰
- `frontend/Dockerfile` - å‰ç«¯é•œåƒå®šä¹‰

### åº”ç”¨ä»£ç 
- `src/app_simple.py` - ç®€åŒ–çš„åç«¯åº”ç”¨ï¼ˆç”¨äº Dockerï¼‰
- `src/app.py` - åŸå§‹çš„å®Œæ•´åº”ç”¨ï¼ˆå¯é€‰ï¼‰

### å¯åŠ¨è„šæœ¬
- `start-fullstack.sh` - è‡ªåŠ¨å¯åŠ¨è„šæœ¬
- `docker-startup.sh` - ç®€åŒ–çš„å¯åŠ¨è„šæœ¬

### æ–‡æ¡£
- `QUICK_START_DOCKER.md` - å¿«é€Ÿå¯åŠ¨æŒ‡å—
- `DOCKER_FULLSTACK_ANALYSIS.md` - é—®é¢˜åˆ†æ
- `DOCKER_FULLSTACK_STARTUP.md` - è¯¦ç»†å¯åŠ¨æŒ‡å—
- `DOCKER_FULLSTACK_COMPLETE_SETUP.md` - å®Œæ•´è®¾ç½®æŒ‡å—

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
export PATH="/Applications/Docker.app/Contents/Resources/bin:$PATH"
docker compose -f docker-compose.fullstack.yml up -d
```

### æŸ¥çœ‹çŠ¶æ€
```bash
docker compose -f docker-compose.fullstack.yml ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
docker compose -f docker-compose.fullstack.yml logs -f
```

### åœæ­¢æ‰€æœ‰æœåŠ¡
```bash
docker compose -f docker-compose.fullstack.yml down
```

---

## ğŸ” æµ‹è¯•å‡­è¯

| è§’è‰² | ç”¨æˆ·å | å¯†ç  |
|------|--------|------|
| ç®¡ç†å‘˜ | admin_user | Admin@123456 |
| ä¸šåŠ¡ä¸“å®¶ | business_expert | Business@123456 |
| æŠ€æœ¯ä¸“å®¶ | technical_expert | Technical@123456 |
| æ‰¿åŒ…å•† | contractor | Contractor@123456 |
| æŸ¥çœ‹è€… | viewer | Viewer@123456 |

---

## âœ¨ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SuperInsight å…¨æ ˆåº”ç”¨                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   å‰ç«¯       â”‚  â”‚   åç«¯ API   â”‚  â”‚ Label Studio â”‚       â”‚
â”‚  â”‚ (5173)       â”‚  â”‚   (8000)     â”‚  â”‚   (8080)     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                         â”‚                         â”‚      â”‚
â”‚  â–¼                         â–¼                         â–¼      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚PostgreSQLâ”‚  â”‚  Redis   â”‚  â”‚  Neo4j   â”‚  â”‚ å…¶ä»–æœåŠ¡ â”‚     â”‚
â”‚ â”‚ (5432)   â”‚  â”‚ (6379)   â”‚  â”‚ (7687)   â”‚  â”‚          â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **å¯åŠ¨æ—¶é—´**: ~2 åˆ†é’Ÿ
- **å®¹å™¨æ•°**: 6 ä¸ª
- **ç½‘ç»œ**: 1 ä¸ª (bridge)
- **å·**: 6 ä¸ª
- **æ€»å†…å­˜ä½¿ç”¨**: ~2-3 GB
- **ç£ç›˜ä½¿ç”¨**: ~5-10 GB

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **åˆ›å»ºæµ‹è¯•ç”¨æˆ·**
   ```bash
   docker compose -f docker-compose.fullstack.yml exec superinsight-api \
     python create_test_users_for_login.py
   ```

2. **è®¿é—®å‰ç«¯**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173/login
   - ä½¿ç”¨æµ‹è¯•å‡­è¯ç™»å½•

3. **æµ‹è¯• API**
   - è®¿é—® http://localhost:8000/docs æŸ¥çœ‹ API æ–‡æ¡£
   - æµ‹è¯•å„ä¸ªç«¯ç‚¹

4. **ç›‘æ§ç³»ç»Ÿ**
   - æŸ¥çœ‹ Neo4j: http://localhost:7474
   - æŸ¥çœ‹ Label Studio: http://localhost:8080

---

## ğŸ“ æ•…éšœæ’é™¤

### å¦‚æœå®¹å™¨æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹æ—¥å¿—
docker compose -f docker-compose.fullstack.yml logs superinsight-api

# é‡å¯å®¹å™¨
docker compose -f docker-compose.fullstack.yml restart superinsight-api
```

### å¦‚æœç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8000
lsof -i :5173

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

### å¦‚æœæ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ PostgreSQL å®¹å™¨
docker compose -f docker-compose.fullstack.yml logs superinsight-postgres

# é‡å¯æ•°æ®åº“
docker compose -f docker-compose.fullstack.yml restart superinsight-postgres
```

---

## ğŸ‰ æ€»ç»“

âœ… **æ‰€æœ‰æœåŠ¡å·²æˆåŠŸéƒ¨ç½²**  
âœ… **æ‰€æœ‰å®¹å™¨å¥åº·è¿è¡Œ**  
âœ… **æ‰€æœ‰ç«¯å£å¯è®¿é—®**  
âœ… **ç³»ç»Ÿå®Œå…¨å°±ç»ª**  

SuperInsight å…¨æ ˆåº”ç”¨å·²å‡†å¤‡å¥½ä½¿ç”¨ï¼

---

**æœ€åæ›´æ–°**: 2026-01-09 22:00 UTC+8  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
