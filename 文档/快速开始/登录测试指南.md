# SuperInsight ç™»å½•æµ‹è¯•æŒ‡å—

**æ—¥æœŸ**: 2026-01-28  
**çŠ¶æ€**: âœ… å·²éªŒè¯  
**æœ€åæ›´æ–°**: 2026-01-28

---

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### ç™»å½•å‡­è¯

| å­—æ®µ | å€¼ |
|------|-----|
| **é‚®ç®±/ç”¨æˆ·å** | `admin@superinsight.local` |
| **å¯†ç ** | `admin123` |
| **è§’è‰²** | ç³»ç»Ÿç®¡ç†å‘˜ (Superuser) |

### è®¿é—®åœ°å€

- **å‰ç«¯åº”ç”¨**: http://localhost:5173
- **åç«¯ API**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ–¹æ³• 1: é€šè¿‡å‰ç«¯ Web ç•Œé¢ç™»å½•

#### æ­¥éª¤ 1: æ‰“å¼€å‰ç«¯åº”ç”¨
```
è®¿é—®: http://localhost:5173
```

#### æ­¥éª¤ 2: è¿›å…¥ç™»å½•é¡µé¢
- åº”è¯¥è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
- å¦‚æœæ²¡æœ‰ï¼Œç‚¹å‡»"ç™»å½•"é“¾æ¥

#### æ­¥éª¤ 3: å¡«å†™ç™»å½•è¡¨å•
1. **ç”¨æˆ·åå­—æ®µ**: è¾“å…¥ `admin@superinsight.local`
   - æ³¨æ„: è™½ç„¶æ ‡ç­¾æ˜¯"ç”¨æˆ·å"ï¼Œä½†å®é™…éœ€è¦è¾“å…¥é‚®ç®±åœ°å€
   - å‰ç«¯ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºé‚®ç®±å­—æ®µå‘é€åˆ°åç«¯

2. **å¯†ç å­—æ®µ**: è¾“å…¥ `admin123`

3. **ç‚¹å‡»ç™»å½•æŒ‰é’®**

#### æ­¥éª¤ 4: éªŒè¯ç™»å½•æˆåŠŸ
- âœ… åº”è¯¥çœ‹åˆ°æˆåŠŸæç¤ºæ¶ˆæ¯
- âœ… åº”è¯¥è·³è½¬åˆ°ä»ªè¡¨æ¿é¡µé¢
- âœ… åº”è¯¥çœ‹åˆ°ç”¨æˆ·ä¿¡æ¯å’Œèœå•

#### æ•…éšœæ’æŸ¥

**é—®é¢˜**: ç™»å½•å¤±è´¥ï¼Œæ˜¾ç¤º "Invalid email or password"
- **åŸå› **: é‚®ç®±æˆ–å¯†ç è¾“å…¥é”™è¯¯
- **è§£å†³**: æ£€æŸ¥æ˜¯å¦è¾“å…¥äº†æ­£ç¡®çš„é‚®ç®±å’Œå¯†ç 

**é—®é¢˜**: ç™»å½•å¤±è´¥ï¼Œæ˜¾ç¤º "404 Not Found"
- **åŸå› **: API ç«¯ç‚¹é…ç½®é”™è¯¯
- **è§£å†³**: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼Œç¡®è®¤ API è¯·æ±‚å‘é€åˆ° `http://localhost:8000/api/auth/login`

**é—®é¢˜**: ç™»å½•æˆåŠŸä½†æ— æ³•è®¿é—®ä»ªè¡¨æ¿
- **åŸå› **: Token è¿‡æœŸæˆ–æƒé™é—®é¢˜
- **è§£å†³**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡æ–°ç™»å½•

---

### æ–¹æ³• 2: é€šè¿‡ API ç›´æ¥æµ‹è¯•

#### ä½¿ç”¨ curl æµ‹è¯•ç™»å½•

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@superinsight.local",
    "password": "admin123"
  }'
```

**é¢„æœŸå“åº”** (HTTP 200):
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": "9a5d8773-5fcd-4c02-9abd-33fbc5ca138a",
    "email": "admin@superinsight.local",
    "username": "admin",
    "name": "Administrator",
    "is_active": true,
    "is_superuser": true
  }
}
```

#### ä½¿ç”¨ Token è®¿é—®å—ä¿æŠ¤çš„ç«¯ç‚¹

```bash
# è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
curl -X GET http://localhost:8000/api/auth/me \
  -H "Authorization: Bearer <access_token>"
```

**é¢„æœŸå“åº”** (HTTP 200):
```json
{
  "id": "9a5d8773-5fcd-4c02-9abd-33fbc5ca138a",
  "email": "admin@superinsight.local",
  "username": "admin",
  "name": "Administrator",
  "is_active": true,
  "is_superuser": true
}
```

---

## ğŸ” æµè§ˆå™¨å¼€å‘è€…å·¥å…·è°ƒè¯•

### æ£€æŸ¥ç½‘ç»œè¯·æ±‚

1. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·** (F12 æˆ– Cmd+Option+I)

2. **åˆ‡æ¢åˆ° Network æ ‡ç­¾**

3. **å¡«å†™ç™»å½•è¡¨å•å¹¶æäº¤**

4. **æŸ¥æ‰¾ POST è¯·æ±‚åˆ° `/api/auth/login`**

5. **æ£€æŸ¥è¯·æ±‚è¯¦æƒ…**:
   - **URL**: `http://localhost:8000/api/auth/login`
   - **Method**: POST
   - **Headers**: 
     ```
     Content-Type: application/json
     ```
   - **Body**:
     ```json
     {
       "email": "admin@superinsight.local",
       "password": "admin123"
     }
     ```

6. **æ£€æŸ¥å“åº”**:
   - **Status**: 200 OK
   - **Response**: åŒ…å« `access_token` å’Œ `user` ä¿¡æ¯

### æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

1. **åˆ‡æ¢åˆ° Console æ ‡ç­¾**

2. **æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯æ¶ˆæ¯**

3. **å¸¸è§é”™è¯¯**:
   - `404 Not Found`: API ç«¯ç‚¹ä¸å­˜åœ¨æˆ–å‰ç¼€é”™è¯¯
   - `401 Unauthorized`: é‚®ç®±æˆ–å¯†ç é”™è¯¯
   - `500 Internal Server Error`: æœåŠ¡å™¨é”™è¯¯

### æ£€æŸ¥æœ¬åœ°å­˜å‚¨

1. **åˆ‡æ¢åˆ° Application æ ‡ç­¾**

2. **æŸ¥çœ‹ Local Storage**:
   - åº”è¯¥åŒ…å« `auth_token` æˆ–ç±»ä¼¼çš„é”®
   - å€¼åº”è¯¥æ˜¯ JWT Token

3. **æŸ¥çœ‹ Cookies**:
   - å¯èƒ½åŒ…å«ä¼šè¯ä¿¡æ¯

---

## ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥åç«¯ API çŠ¶æ€

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# ç³»ç»ŸçŠ¶æ€
curl http://localhost:8000/system/status
```

### æ£€æŸ¥æ•°æ®åº“è¿æ¥

```bash
# è¿æ¥åˆ° PostgreSQL
docker exec superinsight-postgres psql -U superinsight -d superinsight

# æŸ¥è¯¢ç”¨æˆ·è¡¨
SELECT id, email, username, name, is_active, is_superuser FROM users;

# æŸ¥è¯¢ç‰¹å®šç”¨æˆ·
SELECT * FROM users WHERE email = 'admin@superinsight.local';
```

### æ£€æŸ¥å®¹å™¨çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps

# æŸ¥çœ‹ç‰¹å®šå®¹å™¨æ—¥å¿—
docker logs superinsight-frontend
docker logs superinsight-api
docker logs superinsight-postgres
```

---

## ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å•

- [ ] ä½¿ç”¨ HTTPS (ç”Ÿäº§ç¯å¢ƒ)
- [ ] æ›´æ”¹é»˜è®¤å¯†ç 
- [ ] æ›´æ–° JWT å¯†é’¥
- [ ] å¯ç”¨é˜²ç«å¢™è§„åˆ™
- [ ] é…ç½® CORS ç™½åå•
- [ ] å¯ç”¨å®¡è®¡æ—¥å¿—
- [ ] å®šæœŸå¤‡ä»½æ•°æ®åº“
- [ ] ç›‘æ§å¼‚å¸¸ç™»å½•æ´»åŠ¨

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: ç™»å½•è¡¨å•ä¸­çš„"ç”¨æˆ·å"å­—æ®µåº”è¯¥è¾“å…¥ä»€ä¹ˆï¼Ÿ

**A**: è¾“å…¥é‚®ç®±åœ°å€ `admin@superinsight.local`

å‰ç«¯ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºé‚®ç®±å­—æ®µå‘é€åˆ°åç«¯ã€‚è¿™æ˜¯å› ä¸º:
- å‰ç«¯ä½¿ç”¨ `username` å­—æ®µå
- åç«¯æœŸæœ› `email` å­—æ®µ
- å‰ç«¯æœåŠ¡å·²é…ç½®è‡ªåŠ¨è½¬æ¢

### Q: å¿˜è®°äº†å¯†ç æ€ä¹ˆåŠï¼Ÿ

**A**: é€šè¿‡æ•°æ®åº“é‡ç½®å¯†ç 

```bash
# è¿æ¥åˆ°æ•°æ®åº“
docker exec -it superinsight-postgres psql -U superinsight -d superinsight

# ç”Ÿæˆæ–°å¯†ç å“ˆå¸Œ (åœ¨ Python ä¸­)
# import bcrypt
# bcrypt.hashpw(b"new-password", bcrypt.gensalt()).decode('utf-8')

# æ›´æ–°å¯†ç 
UPDATE users SET password_hash = '<new-hash>' WHERE email = 'admin@superinsight.local';
```

### Q: Token è¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿ

**A**: é‡æ–°ç™»å½•è·å–æ–°çš„ Token

Token é»˜è®¤æœ‰æ•ˆæœŸä¸º 30 åˆ†é’Ÿã€‚è¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•ã€‚

### Q: å¦‚ä½•åˆ›å»ºæ–°ç”¨æˆ·ï¼Ÿ

**A**: ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·ç™»å½•åï¼Œè¿›å…¥ç”¨æˆ·ç®¡ç†é¡µé¢åˆ›å»ºæ–°ç”¨æˆ·

æˆ–é€šè¿‡ API åˆ›å»º:
```bash
curl -X POST http://localhost:8000/api/users \
  -H "Authorization: Bearer <admin_token>" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "username": "user",
    "password": "secure-password",
    "name": "User Name"
  }'
```

### Q: å¦‚ä½•ä¿®æ”¹ç”¨æˆ·æƒé™ï¼Ÿ

**A**: ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·ç™»å½•åï¼Œè¿›å…¥ç”¨æˆ·ç®¡ç†é¡µé¢ä¿®æ”¹æƒé™

æˆ–é€šè¿‡ API ä¿®æ”¹:
```bash
curl -X PUT http://localhost:8000/api/users/<user_id>/role \
  -H "Authorization: Bearer <admin_token>" \
  -H "Content-Type: application/json" \
  -d '{
    "role": "admin"
  }'
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

### ç«‹å³
- [ ] æµ‹è¯•å‰ç«¯ç™»å½•åŠŸèƒ½
- [ ] éªŒè¯ç™»å½•åçš„å·¥ä½œæµç¨‹
- [ ] æ£€æŸ¥å…¶ä»– API ç«¯ç‚¹

### æœ¬å‘¨
- [ ] åˆ›å»ºå…¶ä»–ç”¨æˆ·è§’è‰²
- [ ] å®ç°ç”¨æˆ·ç®¡ç†ç•Œé¢
- [ ] æ·»åŠ å¯†ç é‡ç½®åŠŸèƒ½

### æœ¬æœˆ
- [ ] å®ç°å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] æ·»åŠ  OAuth/SSO é›†æˆ
- [ ] å®ç°å®¡è®¡æ—¥å¿—è®°å½•

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥:

1. **åç«¯æ—¥å¿—**: `docker logs superinsight-api`
2. **å‰ç«¯æ—¥å¿—**: `docker logs superinsight-frontend`
3. **æ•°æ®åº“æ—¥å¿—**: `docker logs superinsight-postgres`
4. **æµè§ˆå™¨æ§åˆ¶å°**: F12 â†’ Console
5. **ç½‘ç»œè¯·æ±‚**: F12 â†’ Network

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²éªŒè¯  
**æœ€åæ›´æ–°**: 2026-01-28 17:23:27  
**éªŒè¯ç»“æœ**: æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ…
